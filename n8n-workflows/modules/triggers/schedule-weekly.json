{
  "_module": {
    "name": "Weekly Schedule Trigger",
    "description": "매주 월요일 오전 9시 트리거",
    "version": "1.0.0",
    "inputs": [],
    "outputs": ["trigger_time", "week_start", "week_end"]
  },
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "cronExpression",
              "expression": "0 9 * * 1"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [300, 300],
      "id": "weekly-trigger",
      "name": "Weekly Trigger (Mon 9AM)"
    },
    {
      "parameters": {
        "jsCode": "const now = new Date();\n\n// 지난주 월요일 (7일 전)\nconst weekStart = new Date(now);\nweekStart.setDate(now.getDate() - 7);\nweekStart.setHours(0, 0, 0, 0);\n\n// 지난주 일요일 (어제)\nconst weekEnd = new Date(now);\nweekEnd.setDate(now.getDate() - 1);\nweekEnd.setHours(23, 59, 59, 999);\n\n// ISO 형식\nconst formatDate = (d) => d.toISOString().split('T')[0];\n\nreturn {\n  trigger_time: now.toISOString(),\n  week_start: weekStart.toISOString(),\n  week_end: weekEnd.toISOString(),\n  week_start_date: formatDate(weekStart),\n  week_end_date: formatDate(weekEnd),\n  date_range: `${weekStart.getMonth()+1}/${weekStart.getDate()} ~ ${weekEnd.getMonth()+1}/${weekEnd.getDate()}`\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [500, 300],
      "id": "calculate-week-range",
      "name": "Calculate Week Range"
    }
  ],
  "connections": {
    "Weekly Trigger (Mon 9AM)": {
      "main": [[{"node": "Calculate Week Range", "type": "main", "index": 0}]]
    }
  },
  "_usage": {
    "cron_expression": "0 9 * * 1",
    "description": "매주 월요일 오전 9시 (서버 타임존 기준)",
    "output_example": {
      "trigger_time": "2025-01-13T09:00:00.000Z",
      "week_start": "2025-01-06T00:00:00.000Z",
      "week_end": "2025-01-12T23:59:59.999Z",
      "week_start_date": "2025-01-06",
      "week_end_date": "2025-01-12",
      "date_range": "1/6 ~ 1/12"
    },
    "customization": {
      "change_day": "0 9 * * 5 (금요일)",
      "change_time": "0 18 * * 1 (월요일 오후 6시)"
    }
  }
}
